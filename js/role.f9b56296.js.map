{"version":3,"sources":["webpack:///./src/components/com-common/validateForm/components sync \\.vue","webpack:///./src/views/role/index.vue","webpack:///./src/hooks/formModal/formModal.vue","webpack:///./src/components/com-common/validateForm/validateForm.vue","webpack:///./node_modules/lodash-es/_baseIntersection.js","webpack:///./node_modules/lodash-es/_castArrayLikeObject.js","webpack:///./node_modules/lodash-es/intersection.js","webpack:///./node_modules/@ant-design-vue/use/es/useForm/index.js","webpack:///./src/utils/is/index.ts","webpack:///./src/components/com-common/validateForm/components/index.ts","webpack:///./src/components/com-common/validateForm/validateForm.vue?07a9","webpack:///./src/components/com-common/validateForm/validateForm.vue?5712","webpack:///./src/hooks/formModal/formModal.vue?08fc","webpack:///./src/hooks/formModal/formModal.vue?d537","webpack:///./src/hooks/formModal/index.ts","webpack:///./src/views/role/components/tree.vue","webpack:///./src/views/role/components/tree.vue?3a53","webpack:///./src/views/role/components/tree.vue?ec2f","webpack:///./src/views/role/form-schema.ts","webpack:///./src/views/role/index.vue?381c","webpack:///./src/views/role/index.vue?b457","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/components/com-common/validateForm/validateForm.vue?f758","webpack:///./src/components/com-common/validateForm/components/upload.vue","webpack:///./src/components/com-common/validateForm/components/upload.vue?4eb8","webpack:///./src/components/com-common/validateForm/components/upload.vue?a7f5","webpack:///./src/components/com-common/validateForm/components/input.vue","webpack:///./src/components/com-common/validateForm/components/input.vue?b134","webpack:///./src/components/com-common/validateForm/components/input.vue?293d"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","class","columns","getList","roleList","ref","right-title","addRole","type","visible","confirm-loading","confirmLoading","afterClose","onOk","fields","form-schema","validateForm","formItemLayout","formSchema","formItem","filter","item","hidden","field","spinning","loading","help","extra","label","props","validateInfos","getComponent","value","modelRef","form-item","$slots","wrapper-col","wrapperCol","span","labelCol","nativeMin","Math","min","baseIntersection","arrays","iteratee","comparator","includes","length","othLength","othIndex","caches","Array","maxLength","Infinity","result","array","undefined","index","seen","outer","computed","cache","push","castArrayLikeObject","isArrayLikeObject","intersection","mapped","_objectSpread","target","i","arguments","source","ownKeys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","defineProperty","configurable","writable","_extends","assign","prototype","hasOwnProperty","call","apply","this","isRequired","rules","every","rule","required","toArray","isArray","getPropByPath","path","strict","tempObj","replace","keyArr","split","len","k","v","isValid","useForm","rulesRef","options","initialModel","cloneDeep","autoLink","resetFields","newValues","filterRules","trigger","triggerList","lastValidatePromise","validateFields","names","option","promiseList","values","_loop","name","prop","validateField","then","errors","Promise","reject","summaryPromise","returnPromise","results","errorList","errorFields","outOfDate","promise","validateMessages","validateFirst","validateStatus","validate","promises","clearValidate","mergeValidateInfo","items","info","infos","arg","join","oldModel","modelFn","model","oldProp","isEqual","debounceOptions","debounce","wait","omit","immediate","deep","validateOnRuleChange","toString","is","val","isAsyncFunction","isFunction","file","components","basename","default","Item","setup","ctx","schemaFormRef","formInstance","reduce","previousValue","currentValue","eventObject","asyncOptions","finally","asyncValue","console","log","preset","render","__scopeId","Function","hiddenFields","handleOk","formRef","state","find","res","catch","err","_instance","container","document","createElement","remove","formModal","treeData","style","checkable","checkStrictly","selectable","tree-data","defaultExpandAll","replace-fields","replaceFields","checkedKeys","onCheck","emits","emit","treeList","parent","parent_id","title","children","get","set","checked","data","getParentsKey","treeNode","arr","eventKey","vcTreeNode","getChildrenKeys","prev","curr","node","tempKeys","Set","dataRef","childrenKeys","some","width","placeholder","message","Table","tableRef","dataIndex","slots","customRender","permissions","slug","params","admin","initTableData","$","$find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","proto","forced","callbackfn","fileList","list-type","show-upload-list","action","before-upload","beforeUpload","handleChange","imageUrl","src","alt","getBase64","img","callback","reader","FileReader","addEventListener","readAsDataURL","attrs","status","originFileObj","isJpgOrPng","error","isLt2M","size","modelValue","autocomplete"],"mappings":"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","file":"js/role.f9b56296.js","sourcesContent":["var map = {\n\t\"./input.vue\": \"ed73\",\n\t\"./upload.vue\": \"d124\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"29fa\";","<template>\n  <div class=\"role\">\n    <Table :columns='columns' :getList='roleList' ref=\"tableRef\">\n\t\t<template v-slot:right-title>\n\t\t\t<a-button @click=\"addRole\" type=\"primary\">\n\t\t\t\t添加\n\t\t\t</a-button>\n\t\t</template>\n    </Table>\n  </div>\n</template>\n<script lang='ts'>\nimport { defineComponent, reactive, toRefs, ref } from 'vue';\nimport Table from '@/components/com-common/table/table.vue';\nimport { roleList, adminRole } from '@/server/admin';\nimport {useFormModal} from \"@/hooks/formModal\";\nimport { getFormSchema } from \"./form-schema\";\nexport default defineComponent({\n  name: 'user',\n  components: {\n    Table\n  },\n  setup() {\n\tconst tableRef = ref<any>(null)\n    const state = reactive({\n\t\tcolumns: [\n\t\t\t{\n\t\t\t\ttitle: 'ID',\n\t\t\t\tdataIndex: 'id',\n\t\t\t\tslots: {\n\t\t\t\t\tcustomRender: 'id',\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Slug',\n\t\t\t\tdataIndex: 'slug',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tdataIndex: 'name',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Created At',\n\t\t\t\tdataIndex: 'created_at',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Updated At',\n\t\t\t\tdataIndex: 'updated_at',\n\t\t\t},\n\t\t],\n\t});\n\t// 添加角色\n    const addRole = () => {\n\t\tuseFormModal({\n\t\t\ttitle: '添加角色',\n\t\t\tformSchema: getFormSchema(),\n\t\t\thandleOk: async (modelRef) => {\n\t\t\t\tconst { name, permissions, slug } = modelRef\n\t\t\t\tconst params = {\n\t\t\t\t\tname,\n\t\t\t\t\tpermissions: permissions.join(','),\n\t\t\t\t\tslug\n\t\t\t\t}\n\t\t\tconst {data} = await adminRole(params)\n\t\t\tif (data.code === 200) {\n\t\t\t\ttableRef.value.initTableData()\n\t\t\t}\n\t\t\t}\n\t\t})\n    };\n    return {\n\t\t...toRefs(state),\n\t\troleList,\n\t\taddRole,\n\t\ttableRef\n    };\n  },\n});\n</script>\n<style lang='less' scoped>\n</style>\n","<template>\n  <a-modal\n    v-bind=\"$attrs\"\n    v-model:visible=\"visible\"\n    :confirm-loading=\"confirmLoading\"\n    :afterClose=\"afterClose\"\n    @ok=\"onOk\"\n  >\n    <validate-form ref=\"formRef\" :fields=\"fields\" :form-schema=\"validateForm\" />\n  </a-modal>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, reactive, toRefs, ref, PropType} from 'vue'\nimport { Modal } from 'ant-design-vue'\n// import {useAsync} from \"@/hooks\";\nimport ValidateForm from '@/components/com-common/validateForm/validateForm.vue'\n// import {patchAdminDictConfig, postAdminDictConfig} from \"@/api/system/dict\";\nimport { FormSchema } from \"@/tyings/schema\";\n\nexport default defineComponent({\n  name: 'form-modal',\n  components: { [Modal.name]: Modal, ValidateForm},\n  props: {\n    afterClose: { // 关闭回调\n      type: Function\n    },\n    formSchema: { // 表单项\n      type: Object as PropType<FormSchema>,\n      default: () => ({})\n    },\n    fields: { // 默认值，一般编辑时传入\n      type: Object,\n      default: () => ({})\n    },\n    hiddenFields: { // 不需要显示的字段（表单项）\n      type: Array,\n      default: () => []\n    },\n    handleOk: { // 点击确定\n      type: Function\n    }\n  },\n  setup(props) {\n    const formRef = ref<any>(null)\n    const state = reactive({\n      visible: true,\n      confirmLoading: false,\n      // validateForm: cloneDeep(props.formSchema)\n      validateForm: props.formSchema\n    })\n\n    props.hiddenFields.forEach(field => state.validateForm.formItem.find(item => item.field == field)!.hidden = !!props.fields)\n\n    const onOk = () => {\n      state.confirmLoading = true\n        formRef.value.validate()\n          .then( async res => {\n            await (props.handleOk && props.handleOk(formRef.value.modelRef, state)).finally(() => state.confirmLoading = false)\n            state.visible = false\n          })\n          .catch(err => {\n            console.log('error', err)\n            state.confirmLoading = false\n          })\n    }\n\n    return {\n      ...toRefs(state),\n      onOk,\n      formRef,\n    }\n  }\n})\n</script>\n\n<style scoped>\n</style>\n","<template>\n  <a-form\n      ref=\"validateFormRef\"\n      v-bind=\"formItemLayout\"\n  >\n    <template v-for=\"formItem in formSchema.formItem.filter(item => !item.hidden)\"\n              :key=\"formItem.field\">\n      <a-spin :spinning=\"formItem.loading || false\">\n        <a-form-item\n            :help=\"formItem.help\"\n            :extra=\"formItem.extra\"\n            :label=\"formItem.label\"\n            v-bind=\"{...formItem.props,...validateInfos[formItem.field]}\"\n        >\n          <component\n              v-model:value=\"modelRef[formItem.field]\"\n              :form-item=\"formItem\"\n              :is=\"getComponent(formItem.type)\"/>\n        </a-form-item>\n      </a-spin>\n    </template>\n    <template v-if=\"$slots['operate-button']\">\n      <a-form-item :wrapper-col=\"{ span: formItemLayout.wrapperCol.span, offset: formItemLayout.labelCol.span,  }\">\n        <slot name=\"operate-button\"/>\n      </a-form-item>\n    </template>\n  </a-form>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, getCurrentInstance, isReactive, ref, isRef, createVNode } from 'vue'\nimport {Form, Spin} from 'ant-design-vue'\nimport {useForm} from \"@ant-design-vue/use\";\nimport { isFunction, isAsyncFunction} from '@/utils/is'\nimport components from './components'\nimport {FormItem} from \"@/tyings/schema\";\n\nexport default defineComponent({\n  name: \"dynamic-form\",\n  components: {\n    ...components,\n    [Spin.name]: Spin,\n    [Form.name]: Form,\n    [Form.Item.name]: Form.Item,\n  },\n  props: {\n    formSchema: { // 动态验证表单\n      required: true,\n      type: [Object]\n    } as any,\n    fields: { // 预置字段默认值\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props, ctx) {\n    // a-form\n    const schemaFormRef = ref<any>(null)\n    // 表单实例\n    const formInstance = getCurrentInstance()\n\n    // 表单布局\n    const formItemLayout = {\n      labelCol: {span: 4},\n      wrapperCol: {span: 20},\n      ...props.formSchema.formItemLayout\n    }\n\n    // 表单项\n    const modelRef = reactive(props.formSchema.formItem.reduce((previousValue, currentValue) => {\n      currentValue.eventObject = {}\n      previousValue[currentValue.field] = currentValue.value\n      return previousValue\n    }, {}))\n    // 如果有默认值，则覆盖\n    props.fields && Object.assign(modelRef, props.fields)\n\n    // 异步设置默认数据\n    props.formSchema.formItem.forEach(async (item: FormItem) => {\n      // 是否需要loading\n      if (item?.hasOwnProperty('loading')) {\n        item.loading = true\n      }\n      // 异步选项\n      if (isFunction(item.asyncOptions) || isAsyncFunction(item.asyncOptions)) {\n        item.options = await item.asyncOptions(item, formInstance).finally(() => item.loading = false)\n      } else if (isFunction(item.asyncValue) || isAsyncFunction(item.asyncValue)) { // 异步默认值\n        modelRef[item.field] = await item.asyncValue(item, formInstance).finally(() => item.loading = false)\n      }\n    })\n\n    // 生成表单验证规则\n    const rulesRef = reactive(props.formSchema.formItem.filter(item => !item.hidden).reduce((previousValue, currentValue) => {\n      currentValue.rules && (previousValue[currentValue.field] = currentValue.rules)\n      return previousValue\n    }, {}))\n\n    console.log(modelRef, '表单')\n    console.log(rulesRef, '表单验证规则')\n\n    // const watchCallback = props.formSchema.watchCallback ?? (() => ({}))\n    //\n    // // 是否有需要监测的字段\n    // props.formSchema.watchKeys && watch(props.formSchema.watchKeys.map(item => () => modelRef[item]), (curr, prev) => watchCallback(curr, {\n    //   dynamicForm: props.formSchema,\n    //   modelRef\n    // }))\n    // watch(props.formSchema.watchKeys.map(item => () => modelRef[item]), eval(props.formSchema.watchCallback))\n\n    const {resetFields, validate, validateInfos, validateField} = useForm(modelRef, rulesRef);\n\n    const preset = ['input', 'textarea', 'select', 'radio', 'checkbox', 'input-number', 'input-range', 'switch', 'upload']\n\n    // 获取组件名称\n    const getComponent = (type) => {\n      // 预设组件\n      if (preset.includes(type)) {\n        return type\n      } else if (isReactive(type) || isRef(type)) { // 自定义组件\n        return createVNode(type)\n      } else { // 不识别组件\n        return type\n      }\n    }\n\n    return {\n      formItemLayout,\n      validate,\n      resetFields,\n      validateField,\n      validateInfos,\n      modelRef,\n      schemaFormRef,\n      getComponent,\n    }\n  }\n})\n</script>\n\n<style lang=\"less\" scoped>\n.ant-form {\n  .ant-input-group {\n    display: flex;\n  }\n\n}\n</style>\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseIntersection;\n","import isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nexport default castArrayLikeObject;\n","import arrayMap from './_arrayMap.js';\nimport baseIntersection from './_baseIntersection.js';\nimport baseRest from './_baseRest.js';\nimport castArrayLikeObject from './_castArrayLikeObject.js';\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nexport default intersection;\n","function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { reactive, watch, nextTick } from 'vue';\nimport cloneDeep from 'lodash-es/cloneDeep';\nimport intersection from 'lodash-es/intersection';\nimport isEqual from 'lodash-es/isEqual';\nimport debounce from 'lodash-es/debounce';\nimport omit from 'lodash-es/omit';\nimport { validateRules } from 'ant-design-vue/es/form/utils/validateUtil';\nimport { defaultValidateMessages } from 'ant-design-vue/es/form/utils/messages';\nimport { allPromiseFinish } from 'ant-design-vue/es/form/utils/asyncUtil';\n\nfunction isRequired(rules) {\n  var isRequired = false;\n\n  if (rules && rules.length) {\n    rules.every(function (rule) {\n      if (rule.required) {\n        isRequired = true;\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  return isRequired;\n}\n\nfunction toArray(value) {\n  if (value === undefined || value === null) {\n    return [];\n  }\n\n  return Array.isArray(value) ? value : [value];\n}\n\nfunction getPropByPath(obj, path, strict) {\n  var tempObj = obj;\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\n  path = path.replace(/^\\./, '');\n  var keyArr = path.split('.');\n  var i = 0;\n\n  for (var len = keyArr.length; i < len - 1; ++i) {\n    if (!tempObj && !strict) break;\n    var key = keyArr[i];\n\n    if (key in tempObj) {\n      tempObj = tempObj[key];\n    } else {\n      if (strict) {\n        throw new Error('please transfer a valid name path to validate!');\n      }\n\n      break;\n    }\n  }\n\n  return {\n    o: tempObj,\n    k: keyArr[i],\n    v: tempObj ? tempObj[keyArr[i]] : null,\n    isValid: tempObj && keyArr[i] in tempObj\n  };\n}\n\nfunction useForm(modelRef, rulesRef, options) {\n  var initialModel = cloneDeep(modelRef);\n  var validateInfos = {};\n  Object.keys(rulesRef).forEach(function (key) {\n    validateInfos[key] = {\n      autoLink: false,\n      required: isRequired(rulesRef[key])\n    };\n  });\n  validateInfos = reactive(validateInfos);\n\n  var resetFields = function resetFields(newValues) {\n    _extends(modelRef, _objectSpread({}, cloneDeep(initialModel), newValues)); //modelRef = resetReactiveValue(initialModel, modelRef);\n\n\n    nextTick(function () {\n      Object.keys(validateInfos).forEach(function (key) {\n        validateInfos[key] = {\n          autoLink: false,\n          required: isRequired(rulesRef[key])\n        };\n      });\n    });\n  };\n\n  var filterRules = function filterRules() {\n    var rules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var trigger = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (!trigger.length) {\n      return rules;\n    } else {\n      return rules.filter(function (rule) {\n        var triggerList = toArray(rule.trigger || 'change');\n        return intersection(triggerList, trigger).length;\n      });\n    }\n  };\n\n  var lastValidatePromise = null;\n\n  var validateFields = function validateFields(names) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var strict = arguments.length > 2 ? arguments[2] : undefined;\n    var promiseList = [];\n    var values = {};\n\n    var _loop = function _loop(i) {\n      var name = names[i];\n      var prop = getPropByPath(modelRef, name, strict);\n      if (!prop.isValid) return \"continue\";\n      values[name] = prop.v;\n      var rules = filterRules(rulesRef[name], toArray(option && option.trigger));\n\n      if (rules.length) {\n        promiseList.push(validateField(name, prop.v, rules, option || {}).then(function () {\n          return {\n            name: name,\n            errors: []\n          };\n        })[\"catch\"](function (errors) {\n          return Promise.reject({\n            name: name,\n            errors: errors\n          });\n        }));\n      }\n    };\n\n    for (var i = 0; i < names.length; i++) {\n      var _ret = _loop(i);\n\n      if (_ret === \"continue\") continue;\n    }\n\n    var summaryPromise = allPromiseFinish(promiseList);\n    lastValidatePromise = summaryPromise;\n    var returnPromise = summaryPromise.then(function () {\n      if (lastValidatePromise === summaryPromise) {\n        return Promise.resolve(values);\n      }\n\n      return Promise.reject([]);\n    })[\"catch\"](function (results) {\n      var errorList = results.filter(function (result) {\n        return result && result.errors.length;\n      });\n      return Promise.reject({\n        values: values,\n        errorFields: errorList,\n        outOfDate: lastValidatePromise !== summaryPromise\n      });\n    }); // Do not throw in console\n\n    returnPromise[\"catch\"](function (e) {\n      return e;\n    });\n    return returnPromise;\n  };\n\n  var validateField = function validateField(name, value, rules, option) {\n    var promise = validateRules([name], value, rules, _objectSpread({\n      validateMessages: defaultValidateMessages\n    }, option), !!option.validateFirst);\n    validateInfos[name].validateStatus = 'validating';\n    promise[\"catch\"](function (e) {\n      return e;\n    }).then(function () {\n      var errors = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (validateInfos[name].validateStatus === 'validating') {\n        validateInfos[name].validateStatus = errors.length ? 'error' : 'success';\n        validateInfos[name].help = errors[0];\n      }\n    });\n    return promise;\n  };\n\n  var validate = function validate(names, option) {\n    var keys = [];\n    var strict = true;\n\n    if (!names) {\n      strict = false;\n      keys = Object.keys(rulesRef);\n    } else if (Array.isArray(names)) {\n      keys = names;\n    } else {\n      keys = [names];\n    }\n\n    var promises = validateFields(keys, option || {}, strict); // Do not throw in console\n\n    promises[\"catch\"](function (e) {\n      return e;\n    });\n    return promises;\n  };\n\n  var clearValidate = function clearValidate(names) {\n    var keys = [];\n\n    if (!names) {\n      keys = Object.keys(rulesRef);\n    } else if (Array.isArray(names)) {\n      keys = names;\n    } else {\n      keys = [names];\n    }\n\n    keys.forEach(function (key) {\n      validateInfos[key] && _extends(validateInfos[key], {\n        validateStatus: '',\n        help: ''\n      });\n    });\n  };\n\n  var mergeValidateInfo = function mergeValidateInfo() {\n    var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var info = {\n      autoLink: false\n    };\n    var help = [];\n    var infos = Array.isArray(items) ? items : [items];\n\n    for (var i = 0; i < infos.length; i++) {\n      var arg = infos[i];\n\n      if ((arg === null || arg === void 0 ? void 0 : arg.validateStatus) === 'error') {\n        info.validateStatus = 'error';\n        arg.help && help.push(arg.help);\n      }\n\n      info.required = info.required || (arg === null || arg === void 0 ? void 0 : arg.required);\n    }\n\n    info.help = help.join('\\n');\n    return info;\n  };\n\n  var oldModel = initialModel;\n\n  var modelFn = function modelFn(model) {\n    var names = [];\n    Object.keys(rulesRef).forEach(function (key) {\n      var prop = getPropByPath(model, key, false);\n      var oldProp = getPropByPath(oldModel, key, false);\n\n      if (!isEqual(prop.v, oldProp.v)) {\n        names.push(key);\n      }\n    });\n    validate(names, {\n      trigger: 'change'\n    });\n    oldModel = cloneDeep(model);\n  };\n\n  var debounceOptions = options === null || options === void 0 ? void 0 : options.debounce;\n  watch(modelRef, debounceOptions && debounceOptions.wait ? debounce(modelFn, debounceOptions.wait, omit(debounceOptions, ['wait'])) : modelFn, {\n    immediate: options && !!options.immediate,\n    deep: true\n  });\n  watch(rulesRef, function () {\n    if (options && options.validateOnRuleChange) {\n      validate();\n    }\n  }, {\n    deep: true\n  });\n  return {\n    modelRef: modelRef,\n    rulesRef: rulesRef,\n    initialModel: initialModel,\n    validateInfos: validateInfos,\n    resetFields: resetFields,\n    validate: validate,\n    validateField: validateField,\n    mergeValidateInfo: mergeValidateInfo,\n    clearValidate: clearValidate\n  };\n}\n\nexport default useForm;","const toString = Object.prototype.toString;\n\n/**\n * @description: 判断值是否未某个类型\n */\nexport function is(val: unknown, type: string) {\n    return toString.call(val) === `[object ${type}]`;\n}\n/**\n * @description:  是否为AsyncFunction\n */\nexport function isAsyncFunction<T = any>(val: unknown): val is Promise<T>{\n    return is(val, 'AsyncFunction');\n}\n/**\n * @description:  是否为函数\n */\nexport function isFunction<T = Function>(val: unknown): val is T {\n    return is(val, 'Function');\n  }","const path = require('path')\n\nconst file = require.context('./', true, /\\.vue/)\nconst components = {}\nfile.keys().forEach(key => {\n    const name = path.basename(key, '.vue')\n    components[name] = file(key).default || file(key)\n})\n\nexport default components\n","\nimport { defineComponent, reactive, getCurrentInstance, isReactive, ref, isRef, createVNode } from 'vue'\nimport {Form, Spin} from 'ant-design-vue'\nimport {useForm} from \"@ant-design-vue/use\";\nimport { isFunction, isAsyncFunction} from '@/utils/is'\nimport components from './components'\nimport {FormItem} from \"@/tyings/schema\";\n\nexport default defineComponent({\n  name: \"dynamic-form\",\n  components: {\n    ...components,\n    [Spin.name]: Spin,\n    [Form.name]: Form,\n    [Form.Item.name]: Form.Item,\n  },\n  props: {\n    formSchema: { // 动态验证表单\n      required: true,\n      type: [Object]\n    } as any,\n    fields: { // 预置字段默认值\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props, ctx) {\n    // a-form\n    const schemaFormRef = ref<any>(null)\n    // 表单实例\n    const formInstance = getCurrentInstance()\n\n    // 表单布局\n    const formItemLayout = {\n      labelCol: {span: 4},\n      wrapperCol: {span: 20},\n      ...props.formSchema.formItemLayout\n    }\n\n    // 表单项\n    const modelRef = reactive(props.formSchema.formItem.reduce((previousValue, currentValue) => {\n      currentValue.eventObject = {}\n      previousValue[currentValue.field] = currentValue.value\n      return previousValue\n    }, {}))\n    // 如果有默认值，则覆盖\n    props.fields && Object.assign(modelRef, props.fields)\n\n    // 异步设置默认数据\n    props.formSchema.formItem.forEach(async (item: FormItem) => {\n      // 是否需要loading\n      if (item?.hasOwnProperty('loading')) {\n        item.loading = true\n      }\n      // 异步选项\n      if (isFunction(item.asyncOptions) || isAsyncFunction(item.asyncOptions)) {\n        item.options = await item.asyncOptions(item, formInstance).finally(() => item.loading = false)\n      } else if (isFunction(item.asyncValue) || isAsyncFunction(item.asyncValue)) { // 异步默认值\n        modelRef[item.field] = await item.asyncValue(item, formInstance).finally(() => item.loading = false)\n      }\n    })\n\n    // 生成表单验证规则\n    const rulesRef = reactive(props.formSchema.formItem.filter(item => !item.hidden).reduce((previousValue, currentValue) => {\n      currentValue.rules && (previousValue[currentValue.field] = currentValue.rules)\n      return previousValue\n    }, {}))\n\n    console.log(modelRef, '表单')\n    console.log(rulesRef, '表单验证规则')\n\n    // const watchCallback = props.formSchema.watchCallback ?? (() => ({}))\n    //\n    // // 是否有需要监测的字段\n    // props.formSchema.watchKeys && watch(props.formSchema.watchKeys.map(item => () => modelRef[item]), (curr, prev) => watchCallback(curr, {\n    //   dynamicForm: props.formSchema,\n    //   modelRef\n    // }))\n    // watch(props.formSchema.watchKeys.map(item => () => modelRef[item]), eval(props.formSchema.watchCallback))\n\n    const {resetFields, validate, validateInfos, validateField} = useForm(modelRef, rulesRef);\n\n    const preset = ['input', 'textarea', 'select', 'radio', 'checkbox', 'input-number', 'input-range', 'switch', 'upload']\n\n    // 获取组件名称\n    const getComponent = (type) => {\n      // 预设组件\n      if (preset.includes(type)) {\n        return type\n      } else if (isReactive(type) || isRef(type)) { // 自定义组件\n        return createVNode(type)\n      } else { // 不识别组件\n        return type\n      }\n    }\n\n    return {\n      formItemLayout,\n      validate,\n      resetFields,\n      validateField,\n      validateInfos,\n      modelRef,\n      schemaFormRef,\n      getComponent,\n    }\n  }\n})\n","import { render } from \"./validateForm.vue?vue&type=template&id=64c5a6fc&scoped=true\"\nimport script from \"./validateForm.vue?vue&type=script&lang=ts\"\nexport * from \"./validateForm.vue?vue&type=script&lang=ts\"\n\nimport \"./validateForm.vue?vue&type=style&index=0&id=64c5a6fc&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-64c5a6fc\"\n\nexport default script","\nimport {defineComponent, reactive, toRefs, ref, PropType} from 'vue'\nimport { Modal } from 'ant-design-vue'\n// import {useAsync} from \"@/hooks\";\nimport ValidateForm from '@/components/com-common/validateForm/validateForm.vue'\n// import {patchAdminDictConfig, postAdminDictConfig} from \"@/api/system/dict\";\nimport { FormSchema } from \"@/tyings/schema\";\n\nexport default defineComponent({\n  name: 'form-modal',\n  components: { [Modal.name]: Modal, ValidateForm},\n  props: {\n    afterClose: { // 关闭回调\n      type: Function\n    },\n    formSchema: { // 表单项\n      type: Object as PropType<FormSchema>,\n      default: () => ({})\n    },\n    fields: { // 默认值，一般编辑时传入\n      type: Object,\n      default: () => ({})\n    },\n    hiddenFields: { // 不需要显示的字段（表单项）\n      type: Array,\n      default: () => []\n    },\n    handleOk: { // 点击确定\n      type: Function\n    }\n  },\n  setup(props) {\n    const formRef = ref<any>(null)\n    const state = reactive({\n      visible: true,\n      confirmLoading: false,\n      // validateForm: cloneDeep(props.formSchema)\n      validateForm: props.formSchema\n    })\n\n    props.hiddenFields.forEach(field => state.validateForm.formItem.find(item => item.field == field)!.hidden = !!props.fields)\n\n    const onOk = () => {\n      state.confirmLoading = true\n        formRef.value.validate()\n          .then( async res => {\n            await (props.handleOk && props.handleOk(formRef.value.modelRef, state)).finally(() => state.confirmLoading = false)\n            state.visible = false\n          })\n          .catch(err => {\n            console.log('error', err)\n            state.confirmLoading = false\n          })\n    }\n\n    return {\n      ...toRefs(state),\n      onOk,\n      formRef,\n    }\n  }\n})\n","import { render } from \"./formModal.vue?vue&type=template&id=a4355b34&scoped=true\"\nimport script from \"./formModal.vue?vue&type=script&lang=ts\"\nexport * from \"./formModal.vue?vue&type=script&lang=ts\"\nscript.render = render\nscript.__scopeId = \"data-v-a4355b34\"\n\nexport default script","// create-api.ts\nimport {App, createVNode, render} from 'vue'\nimport FormModal from './formModal.vue'\nimport {FormSchema} from \"@/tyings/schema\";\n\ninterface ModalInstance {\n    remove(): void\n    $updateProps(props: any): void\n}\n\ninterface Options {\n    handleOk: (modelRef: any, state) => Promise<any> // 点击提交表单\n    formSchema: FormSchema // 表单描述属性\n    fields?: object // 字段默认填充值，一般编辑表单是传入\n    hiddenFields?: string[] // 需要隐藏的表单项\n    [key: string]: any\n}\n\n/**\n * 创建表单模态框\n * @param modalOptions\n * @param formOptions\n */\nexport const useFormModal = (options: Options): any => {\n    // 组件实例\n    let _instance = null\n    const container = document.createElement('div')\n    // 移除组件\n    const remove = () => {\n        render(null, container)\n        _instance = null\n        container.remove()\n    }\n    const formModal = createVNode(FormModal, {...options,remove})\n    render(formModal, container)\n    return _instance\n}\n","<template>\n\t<a-spin :spinning=\"spinning\">\n\t\t<a-tree\n      v-if=\"treeData.length > 0\"\n\t\t\tstyle=\"min-height: 40px\"\n\t\t\tcheckable\n\t\t\tcheckStrictly\n\t\t\t:selectable=\"false\"\n\t\t\t:tree-data=\"treeData\"\n      defaultExpandAll\n\t\t\t:replace-fields=\"replaceFields\"\n\t\t\tv-model:checkedKeys=\"checkedKeys\"\n\t\t\t@check=\"onCheck\"\n\t\t>\n\t\t</a-tree>\n\t</a-spin>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, computed, onMounted } from \"vue\";\nimport { Tree, Spin } from \"ant-design-vue\";\nimport { permissionList } from \"@/server/admin\";\n\nexport default defineComponent({\n  name: 'tree',\n  components: { [Tree.name]: Tree, [Spin.name]: Spin },\n  emits: ['update:value'], // 双向数据绑定\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, { emit }) {\n    const state = reactive({\n      treeData: [],\n      spinning: false,\n      replaceFields: {\n        key: \"id\",\n      },\n    });\n\n    // 列表转树\n    const treeList = (items, parent = 0) => {\n      return items\n        .filter((item) => item.parent_id == parent)\n        .map((item) => ({\n          ...item,\n          title: item.name,\n          children: item.children ? treeList(item.children, item.id) : [],\n        }));\n    };\n\n    // 已勾选的节点\n    const checkedKeys = computed({\n      get: () => props.value,\n      set: (val: any) =>\n        emit('update:value', Array.isArray(val) ? val : val.checked),\n    });\n\n    onMounted(async () => {\n      // 获取权限资源列表\n      state.spinning = true;\n      const {data} = await permissionList().finally(\n        () => (state.spinning = false)\n      );\n      if (data.code === 200) {\n        state.treeData = treeList(data.data);\n      }\n    });\n\n    // 获取所有父节点的key\n    const getParentsKey = (treeNode, arr: number[] = []) => {\n      if (treeNode.eventKey) {\n        arr.push(treeNode.eventKey);\n        return getParentsKey(treeNode.vcTreeNode, arr);\n      }\n      return arr;\n    };\n\n    // 获取所有子节点的key\n    const getChildrenKeys = (treeNode, arr: number[] = []) => {\n      if (treeNode?.children.length > 0) {\n        console.log(treeNode.children, 'children');\n        return treeNode.children.reduce((prev, curr) => {\n          if (curr.children.length > 0) {\n            prev.push(...getChildrenKeys(curr, prev), []);\n          }\n          return prev.concat([curr.id]);\n        }, arr);\n      }\n      return arr;\n    };\n\n    // 勾选事件处理函数\n    const onCheck = (keys, { node, checked }) => {\n      let tempKeys: number[] = checkedKeys.value;\n      // 子节点选中，父节点必然要选中\n      if (checked) {\n        tempKeys = [\n          ...new Set([\n            ...checkedKeys.value,\n            ...keys.checked,\n            ...getParentsKey(node.vcTreeNode),\n            ...getChildrenKeys(node.dataRef),\n          ]),\n        ];\n      } else {\n        const childrenKeys = getChildrenKeys(node.dataRef);\n        console.log(childrenKeys, 'childrenKeys');\n        if (childrenKeys.length > 0) {\n          tempKeys = keys.checked.filter(\n            (item) => !childrenKeys.includes(item)\n          );\n        } else {\n          tempKeys = keys.checked;\n        }\n        // 获取所有同级节点\n        const children =\n          node.vcTreeNode?.dataRef?.children?.map((item) => item.id) || [];\n        // 如果当前所有选中的节点中没有包含任何一个直属子节点\n        if (!children.some((item) => tempKeys.includes(item))) {\n          tempKeys = tempKeys.filter(\n            (item) => item != node.vcTreeNode?.eventKey\n          );\n        }\n      }\n      checkedKeys.value = tempKeys;\n    };\n\n    return {\n      ...toRefs(state),\n      checkedKeys,\n      onCheck,\n    };\n  },\n});\n</script>\n\n<style scoped></style>\n","\nimport { defineComponent, reactive, toRefs, computed, onMounted } from \"vue\";\nimport { Tree, Spin } from \"ant-design-vue\";\nimport { permissionList } from \"@/server/admin\";\n\nexport default defineComponent({\n  name: 'tree',\n  components: { [Tree.name]: Tree, [Spin.name]: Spin },\n  emits: ['update:value'], // 双向数据绑定\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, { emit }) {\n    const state = reactive({\n      treeData: [],\n      spinning: false,\n      replaceFields: {\n        key: \"id\",\n      },\n    });\n\n    // 列表转树\n    const treeList = (items, parent = 0) => {\n      return items\n        .filter((item) => item.parent_id == parent)\n        .map((item) => ({\n          ...item,\n          title: item.name,\n          children: item.children ? treeList(item.children, item.id) : [],\n        }));\n    };\n\n    // 已勾选的节点\n    const checkedKeys = computed({\n      get: () => props.value,\n      set: (val: any) =>\n        emit('update:value', Array.isArray(val) ? val : val.checked),\n    });\n\n    onMounted(async () => {\n      // 获取权限资源列表\n      state.spinning = true;\n      const {data} = await permissionList().finally(\n        () => (state.spinning = false)\n      );\n      if (data.code === 200) {\n        state.treeData = treeList(data.data);\n      }\n    });\n\n    // 获取所有父节点的key\n    const getParentsKey = (treeNode, arr: number[] = []) => {\n      if (treeNode.eventKey) {\n        arr.push(treeNode.eventKey);\n        return getParentsKey(treeNode.vcTreeNode, arr);\n      }\n      return arr;\n    };\n\n    // 获取所有子节点的key\n    const getChildrenKeys = (treeNode, arr: number[] = []) => {\n      if (treeNode?.children.length > 0) {\n        console.log(treeNode.children, 'children');\n        return treeNode.children.reduce((prev, curr) => {\n          if (curr.children.length > 0) {\n            prev.push(...getChildrenKeys(curr, prev), []);\n          }\n          return prev.concat([curr.id]);\n        }, arr);\n      }\n      return arr;\n    };\n\n    // 勾选事件处理函数\n    const onCheck = (keys, { node, checked }) => {\n      let tempKeys: number[] = checkedKeys.value;\n      // 子节点选中，父节点必然要选中\n      if (checked) {\n        tempKeys = [\n          ...new Set([\n            ...checkedKeys.value,\n            ...keys.checked,\n            ...getParentsKey(node.vcTreeNode),\n            ...getChildrenKeys(node.dataRef),\n          ]),\n        ];\n      } else {\n        const childrenKeys = getChildrenKeys(node.dataRef);\n        console.log(childrenKeys, 'childrenKeys');\n        if (childrenKeys.length > 0) {\n          tempKeys = keys.checked.filter(\n            (item) => !childrenKeys.includes(item)\n          );\n        } else {\n          tempKeys = keys.checked;\n        }\n        // 获取所有同级节点\n        const children =\n          node.vcTreeNode?.dataRef?.children?.map((item) => item.id) || [];\n        // 如果当前所有选中的节点中没有包含任何一个直属子节点\n        if (!children.some((item) => tempKeys.includes(item))) {\n          tempKeys = tempKeys.filter(\n            (item) => item != node.vcTreeNode?.eventKey\n          );\n        }\n      }\n      checkedKeys.value = tempKeys;\n    };\n\n    return {\n      ...toRefs(state),\n      checkedKeys,\n      onCheck,\n    };\n  },\n});\n","import { render } from \"./tree.vue?vue&type=template&id=9fe16f16\"\nimport script from \"./tree.vue?vue&type=script&lang=ts\"\nexport * from \"./tree.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import {createVNode} from 'vue'\nimport Tree from './components/tree.vue'\nimport {FormSchema} from \"@/tyings/schema\";\nimport { permissionList } from \"@/server/admin\";\n\n// 与vue2的里面的data一样，函数返回新对象防止多处共用同一对象,造成数据混乱\nexport const getFormSchema = (): FormSchema => ({\n    style: {\n        width: \"auto\"\n    },\n    formItemLayout: {\n        labelCol: {\n            span: 4\n        },\n        wrapperCol: {\n            span: 20\n        }\n    },\n    formItem: [\n        {\n            type: 'input',\n            label: 'Slug',\n            field: 'slug',\n            value: '',\n            props: {\n                placeholder: '请输入Slug'\n            },\n            rules: [\n                {\n                    required: true,\n                    message: 'Slug不能为空'\n                }\n            ]\n        },\n        {\n            type: 'input',\n            label: 'Name',\n            field: 'name',\n            value: '',\n            props: {\n                placeholder: '请输入Name'\n            },\n            rules: [\n                {\n                    required: true,\n                    message: 'Name不能为空'\n                }\n            ]\n        },\n        {\n            type: createVNode(Tree),\n            label: \"资源\",\n            field: \"permissions\",\n            value: [],\n            asyncValue: async (currentValue, formInstance) => {\n                const {id} = formInstance?.props.fields as any\n                // 获取角色列表\n                const { data } = await permissionList(id)\n                if (data.code === 200) {\n                    return data.data.map(item => item.id)\n                }\n                // 设置角色复选框选项\n            }\n        }\n    ]\n})\n\n","\nimport { defineComponent, reactive, toRefs, ref } from 'vue';\nimport Table from '@/components/com-common/table/table.vue';\nimport { roleList, adminRole } from '@/server/admin';\nimport {useFormModal} from \"@/hooks/formModal\";\nimport { getFormSchema } from \"./form-schema\";\nexport default defineComponent({\n  name: 'user',\n  components: {\n    Table\n  },\n  setup() {\n\tconst tableRef = ref<any>(null)\n    const state = reactive({\n\t\tcolumns: [\n\t\t\t{\n\t\t\t\ttitle: 'ID',\n\t\t\t\tdataIndex: 'id',\n\t\t\t\tslots: {\n\t\t\t\t\tcustomRender: 'id',\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Slug',\n\t\t\t\tdataIndex: 'slug',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tdataIndex: 'name',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Created At',\n\t\t\t\tdataIndex: 'created_at',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Updated At',\n\t\t\t\tdataIndex: 'updated_at',\n\t\t\t},\n\t\t],\n\t});\n\t// 添加角色\n    const addRole = () => {\n\t\tuseFormModal({\n\t\t\ttitle: '添加角色',\n\t\t\tformSchema: getFormSchema(),\n\t\t\thandleOk: async (modelRef) => {\n\t\t\t\tconst { name, permissions, slug } = modelRef\n\t\t\t\tconst params = {\n\t\t\t\t\tname,\n\t\t\t\t\tpermissions: permissions.join(','),\n\t\t\t\t\tslug\n\t\t\t\t}\n\t\t\tconst {data} = await adminRole(params)\n\t\t\tif (data.code === 200) {\n\t\t\t\ttableRef.value.initTableData()\n\t\t\t}\n\t\t\t}\n\t\t})\n    };\n    return {\n\t\t...toRefs(state),\n\t\troleList,\n\t\taddRole,\n\t\ttableRef\n    };\n  },\n});\n","import { render } from \"./index.vue?vue&type=template&id=5c006fa6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\nscript.__scopeId = \"data-v-5c006fa6\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./validateForm.vue?vue&type=style&index=0&id=64c5a6fc&lang=less&scoped=true\"","<template>\n  <a-upload\n    v-model:fileList=\"fileList\"\n    name=\"avatar\"\n    list-type=\"picture-card\"\n    class=\"avatar-uploader\"\n    :show-upload-list=\"false\"\n    action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\n    :before-upload=\"beforeUpload\"\n    @change=\"handleChange\"\n  >\n    <img v-if=\"imageUrl\" :src=\"imageUrl\" alt=\"avatar\" />\n    <div v-else>\n      <!-- todo -->\n      <loading-outlined v-if=\"loading\" />\n      <plus-outlined v-else />\n      <div class=\"ant-upload-text\">Upload</div>\n    </div>\n  </a-upload>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, PropType, computed, reactive, toRefs } from \"vue\";\nimport { PlusOutlined, LoadingOutlined } from '@ant-design/icons-vue';\nimport { message, Upload } from 'ant-design-vue';\nimport { FormItem } from \"@/tyings/schema\";\n\nfunction getBase64(img, callback) {\n  const reader = new FileReader();\n  reader.addEventListener('load', () => callback(reader.result));\n  reader.readAsDataURL(img);\n}\n\nexport default defineComponent({\n\tname: \"schema-form-input\",\n\temits: [\"update:value\"],\n\tcomponents: {\n\t\t[Upload.name]: Upload,\n\t},\n\tprops: {\n\t\tformItem: {\n\t\t\t// 表单项\n\t\t\ttype: Object as PropType<FormItem>,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tvalue: undefined as any, // 表单项值\n\t},\n\tsetup(props, { attrs, emit }) {\n\t\tconst fileList = computed({\n\t\t\tget: () => props.value,\n\t\t\tset: (val) => emit('update:value', val)\n    });\n    const state = reactive({\n      loading: false,\n      imageUrl: ''\n    })\n    const handleChange = (info) => {\n      if (info.file.status === 'uploading') {\n        state.loading = true;\n        return;\n      }\n      if (info.file.status === 'done') {\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, imageUrl => {\n          state.imageUrl = imageUrl;\n          state.loading = false;\n        });\n      }\n      if (info.file.status === 'error') {\n        state.loading = false;\n      }\n    }\n    const beforeUpload = (file) => {\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n      if (!isJpgOrPng) {\n        message.error('You can only upload JPG file!');\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isLt2M) {\n        message.error('Image must smaller than 2MB!');\n      }\n      return isJpgOrPng && isLt2M;\n    }\n\t\treturn {\n      ...toRefs(state),\n      fileList,\n      handleChange,\n      beforeUpload\n\t\t};\n\t},\n});\n</script>","\nimport { defineComponent, PropType, computed, reactive, toRefs } from \"vue\";\nimport { PlusOutlined, LoadingOutlined } from '@ant-design/icons-vue';\nimport { message, Upload } from 'ant-design-vue';\nimport { FormItem } from \"@/tyings/schema\";\n\nfunction getBase64(img, callback) {\n  const reader = new FileReader();\n  reader.addEventListener('load', () => callback(reader.result));\n  reader.readAsDataURL(img);\n}\n\nexport default defineComponent({\n\tname: \"schema-form-input\",\n\temits: [\"update:value\"],\n\tcomponents: {\n\t\t[Upload.name]: Upload,\n\t},\n\tprops: {\n\t\tformItem: {\n\t\t\t// 表单项\n\t\t\ttype: Object as PropType<FormItem>,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tvalue: undefined as any, // 表单项值\n\t},\n\tsetup(props, { attrs, emit }) {\n\t\tconst fileList = computed({\n\t\t\tget: () => props.value,\n\t\t\tset: (val) => emit('update:value', val)\n    });\n    const state = reactive({\n      loading: false,\n      imageUrl: ''\n    })\n    const handleChange = (info) => {\n      if (info.file.status === 'uploading') {\n        state.loading = true;\n        return;\n      }\n      if (info.file.status === 'done') {\n        // Get this url from response in real world.\n        getBase64(info.file.originFileObj, imageUrl => {\n          state.imageUrl = imageUrl;\n          state.loading = false;\n        });\n      }\n      if (info.file.status === 'error') {\n        state.loading = false;\n      }\n    }\n    const beforeUpload = (file) => {\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n      if (!isJpgOrPng) {\n        message.error('You can only upload JPG file!');\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isLt2M) {\n        message.error('Image must smaller than 2MB!');\n      }\n      return isJpgOrPng && isLt2M;\n    }\n\t\treturn {\n      ...toRefs(state),\n      fileList,\n      handleChange,\n      beforeUpload\n\t\t};\n\t},\n});\n","import { render } from \"./upload.vue?vue&type=template&id=0575ddee\"\nimport script from \"./upload.vue?vue&type=script&lang=ts\"\nexport * from \"./upload.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n\t<a-input\n\t\tv-model:value=\"modelValue\"\n\t\tv-bind=\"formItem.props\"\n\t\tv-on=\"formItem.eventObject\"\n\t\tautocomplete=\"new-password\"\n\t/>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, PropType, computed } from \"vue\";\nimport { Input } from \"ant-design-vue\";\nimport { FormItem } from \"@/tyings/schema\";\n\nexport default defineComponent({\n\tname: \"schema-form-input\",\n\temits: [\"update:value\"],\n\tcomponents: {\n\t\t[Input.name]: Input,\n\t},\n\tprops: {\n\t\tformItem: {\n\t\t\t// 表单项\n\t\t\ttype: Object as PropType<FormItem>,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tvalue: undefined as any, // 表单项值\n\t},\n\tsetup(props, { attrs, emit }) {\n\t\tconst modelValue = computed({\n\t\t\tget: () => props.value,\n\t\t\tset: (val) => emit('update:value', val)\n\t\t});\n\t\treturn {\n\t\t\tmodelValue\n\t\t};\n\t},\n});\n</script>\n","\nimport { defineComponent, PropType, computed } from \"vue\";\nimport { Input } from \"ant-design-vue\";\nimport { FormItem } from \"@/tyings/schema\";\n\nexport default defineComponent({\n\tname: \"schema-form-input\",\n\temits: [\"update:value\"],\n\tcomponents: {\n\t\t[Input.name]: Input,\n\t},\n\tprops: {\n\t\tformItem: {\n\t\t\t// 表单项\n\t\t\ttype: Object as PropType<FormItem>,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t\tvalue: undefined as any, // 表单项值\n\t},\n\tsetup(props, { attrs, emit }) {\n\t\tconst modelValue = computed({\n\t\t\tget: () => props.value,\n\t\t\tset: (val) => emit('update:value', val)\n\t\t});\n\t\treturn {\n\t\t\tmodelValue\n\t\t};\n\t},\n});\n","import { render } from \"./input.vue?vue&type=template&id=6d7f836a\"\nimport script from \"./input.vue?vue&type=script&lang=ts\"\nexport * from \"./input.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}