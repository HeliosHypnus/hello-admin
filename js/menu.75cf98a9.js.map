{"version":3,"sources":["webpack:///./src/views/menu/components/tree.vue?8b6e","webpack:///./src/views/menu/index.vue?bd31","webpack:///./src/views/menu/index.vue","webpack:///./node_modules/@ant-design/icons-svg/es/asn/FormOutlined.js","webpack:///./node_modules/@ant-design/icons-vue/es/icons/FormOutlined.js","webpack:///./src/views/menu/components/tree.vue","webpack:///./src/server/menu.ts","webpack:///./src/views/menu/components/tree.vue?810c","webpack:///./src/views/menu/components/tree.vue?0d50","webpack:///./src/views/menu/index.vue?e5bd","webpack:///./src/views/menu/index.vue?3366"],"names":["class","gutter","span","action","edit","v","dele","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","AntdIcon","displayName","inheritAttrs","spinning","treeData","selectable","replace-fields","replaceFields","checkedKeys","defaultExpandAll","showIcon","onCheck","item","title","id","icon","children","uri","MENU","name","components","emits","type","Array","default","setup","emit","state","treeList","items","parent","parent_id","map","get","set","val","isArray","checked","finally","data","code","console","log","getParentsKey","treeNode","arr","eventKey","push","vcTreeNode","getChildrenKeys","reduce","prev","curr","node","tempKeys","Set","dataRef","childrenKeys","includes","some","render","Tree","DeleteOutlined","FormOutlined","__scopeId"],"mappings":"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","file":"js/menu.75cf98a9.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./tree.vue?vue&type=style&index=0&id=1dc8395f&lang=less\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=1ccd1a4c&lang=less&scoped=true\"","<template>\n    <div class=\"menu\">\n        <a-row :gutter=\"16\">\n            <a-col :span=\"14\">\n                <div class=\"box\">\n                    <Tree >\n                        <template v-slot:action=\"v\">\n                            <FormOutlined @click=\"() => edit(v)\" />\n                            <DeleteOutlined @click=\"() => dele(v)\" />\n                        </template>\n                    </Tree>\n                </div>\n            </a-col>\n            <a-col :span=\"10\">\n                <div class=\"box\">\n\n                </div>\n            </a-col>\n        </a-row>\n    </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n// import { getMenu } from '@/server/menu'\nimport { FormOutlined, DeleteOutlined } from '@ant-design/icons-vue';\nimport Tree from './components/tree.vue'\nexport default defineComponent({\n    name: 'menu',\n    components: {\n        Tree,\n        DeleteOutlined,\n        FormOutlined\n    },\n    setup() {\n        const edit = (v) => {\n            console.log('d')\n        }\n        const dele = (v) => {\n            console.log('dasd')\n        }\n        return {\n            edit,\n            dele\n        }\n    }\n})\n</script>\n<style lang=\"less\" scoped>\n    .menu {\n        min-height: calc(~\"100vh - 104px\");\n        background: #f0f2f5;\n        .box {\n            min-height: calc(~\"100vh - 104px\");\n            background: #fff;\n            padding: 10px;\n        }\n    }\n</style>","// This icon file is generated automatically.\nvar FormOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z\" } }] }, \"name\": \"form\", \"theme\": \"outlined\" };\nexport default FormOutlined;\n","import * as _vue from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport FormOutlinedSvg from \"@ant-design/icons-svg/es/asn/FormOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FormOutlined = function FormOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _vue.createVNode(AntdIcon, _vue.mergeProps(p, {\n    \"icon\": FormOutlinedSvg\n  }), null);\n};\n\nFormOutlined.displayName = 'FormOutlined';\nFormOutlined.inheritAttrs = false;\nexport default FormOutlined;","<template>\n\t<a-spin :spinning=\"spinning\" >\n\t\t<a-tree\n            v-if=\"treeData.length > 0\"\n            class=\"u-tree\"\n\t\t\t:selectable=\"false\"\n\t\t\t:replace-fields=\"replaceFields\"\n\t\t\tv-model:checkedKeys=\"checkedKeys\"\n            defaultExpandAll\n            :showIcon=\"true\"\n\t\t\t@check=\"onCheck\"\n\t\t>\n                <a-tree-node v-for=\"item in treeData\" :title=\"item.title\" :key=\"item.id\">\n                    <template #icon>\n                        <i class=\"iocnfont\" :class=\"'icon-' + item.icon\"></i>\n                    </template>\n                    <a-tree-node v-for=\"v in item.children\" :key=\"v.id\" >\n                        <template #icon>\n                            <i class=\"iocnfont\" :class=\"'icon-' + v.icon\"></i>\n                        </template>\n                        <template #title>\n                            <span class=\"tree-title\">{{v.title}}</span>\n                            <span class=\"tree-url\">{{v.uri}}</span>\n                            <div class=\"action\">\n                                <slot name=\"action\" v-bind=\"v\"></slot>\n                            </div>\n                        </template>\n                    </a-tree-node>\n                </a-tree-node>\n\t\t</a-tree>\n\t</a-spin>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs, computed, onMounted, PropType } from \"vue\";\nimport { Tree, Spin } from \"ant-design-vue\";\nimport { getMenu } from \"@/server/menu\";\nimport {MenuItem} from '@/tyings/index'\n\nexport default defineComponent({\n  name: \"access-tree\",\n  components: { [Tree.name]: Tree, [Spin.name]: Spin },\n  emits: [\"update:value\"], // 双向数据绑定\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, { emit }) {\n    const state = reactive({\n      treeData: [],\n      spinning: false,\n      replaceFields: {\n        key: \"id\",\n      },\n    });\n\n    // 列表转树\n    const treeList = (items, parent = 0) => {\n      return items\n        .filter((item) => item.parent_id == parent)\n        .map((item) => ({\n          ...item,\n          title: item.title ,\n          children: item.children ? treeList(item.children, item.id) : [],\n        }));\n    };\n\n    // 已勾选的节点\n    const checkedKeys = computed({\n      get: () => props.value,\n      set: (val: any) =>\n        emit(\"update:value\", Array.isArray(val) ? val : val.checked),\n    });\n\n    onMounted(async () => {\n      // 获取菜单列表\n      state.spinning = true;\n      const {data} = await getMenu().finally(\n        () => (state.spinning = false)\n      );\n      if (data.code === 200) {\n        state.treeData = treeList(data.data);\n        console.log(state.treeData)\n      }\n    });\n\n    // 获取所有父节点的key\n    const getParentsKey = (treeNode, arr: number[] = []) => {\n      if (treeNode.eventKey) {\n        arr.push(treeNode.eventKey);\n        return getParentsKey(treeNode.vcTreeNode, arr);\n      }\n      return arr;\n    };\n\n    // 获取所有子节点的key\n    const getChildrenKeys = (treeNode, arr: number[] = []) => {\n      if (treeNode?.children.length > 0) {\n        console.log(treeNode.children, \"children\");\n        return treeNode.children.reduce((prev, curr) => {\n          if (curr.children.length > 0) {\n            prev.push(...getChildrenKeys(curr, prev), []);\n          }\n          return prev.concat([curr.id]);\n        }, arr);\n      }\n      return arr;\n    };\n\n    // 勾选事件处理函数\n    const onCheck = (keys, { node, checked }) => {\n      let tempKeys: number[] = checkedKeys.value;\n      // 子节点选中，父节点必然要选中\n      if (checked) {\n        tempKeys = [\n          ...new Set([\n            ...checkedKeys.value,\n            ...keys.checked,\n            ...getParentsKey(node.vcTreeNode),\n            ...getChildrenKeys(node.dataRef),\n          ]),\n        ];\n      } else {\n        const childrenKeys = getChildrenKeys(node.dataRef);\n        console.log(childrenKeys, \"childrenKeys\");\n        if (childrenKeys.length > 0) {\n          tempKeys = keys.checked.filter(\n            (item) => !childrenKeys.includes(item)\n          );\n        } else {\n          tempKeys = keys.checked;\n        }\n        // 获取所有同级节点\n        const children =\n          node.vcTreeNode?.dataRef?.children?.map((item) => item.id) || [];\n        // 如果当前所有选中的节点中没有包含任何一个直属子节点\n        if (!children.some((item) => tempKeys.includes(item))) {\n          tempKeys = tempKeys.filter(\n            (item) => item != node.vcTreeNode?.eventKey\n          );\n        }\n      }\n      checkedKeys.value = tempKeys;\n    };\n\n    return {\n      ...toRefs(state),\n      checkedKeys,\n      onCheck,\n    };\n  },\n});\n</script>\n\n<style lang=\"less\" >\n.u-tree {\n    &.ant-tree {\n        text-align: left;\n        // .ant-tree-treenode-switcher-close, .ant-tree-treenode-switcher-open {\n        //     border: 1px solid #ccc;\n        // }\n        .tree-title {\n            margin-right: 20px;\n            &:hover {\n                color: #00375b;\n            }\n        }\n        .action {\n            float: right;\n            display: inline-block;\n            .anticon {\n                padding: 0px 5px;\n                transition: all .3s;\n                &:hover {\n                    color: #00375b;\n                }\n            }\n        }\n        .tree-url {\n            color: #00375b;\n            font-weight: normal;\n        }\n        .ant-tree-node-content-wrapper {\n            width: calc(100%  - 10px);\n            border: 1px solid #eaeff0;\n            padding: 5px 0 !important;\n            box-sizing: content-box;\n            padding-left: 10px !important;\n            font-weight: bolder;\n            font-size: 16px;\n        }\n        .ant-tree-switcher {\n            padding: 5px 0;\n        }\n    }\n}\n</style>\n","import { get } from './request';\nimport API from '@/config/api.config'\n// 获取菜单列表\nexport const getMenu = () => {\n    return get(`${API.MENU}`)\n}","\nimport { defineComponent, reactive, toRefs, computed, onMounted, PropType } from \"vue\";\nimport { Tree, Spin } from \"ant-design-vue\";\nimport { getMenu } from \"@/server/menu\";\nimport {MenuItem} from '@/tyings/index'\n\nexport default defineComponent({\n  name: \"access-tree\",\n  components: { [Tree.name]: Tree, [Spin.name]: Spin },\n  emits: [\"update:value\"], // 双向数据绑定\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  setup(props, { emit }) {\n    const state = reactive({\n      treeData: [],\n      spinning: false,\n      replaceFields: {\n        key: \"id\",\n      },\n    });\n\n    // 列表转树\n    const treeList = (items, parent = 0) => {\n      return items\n        .filter((item) => item.parent_id == parent)\n        .map((item) => ({\n          ...item,\n          title: item.title ,\n          children: item.children ? treeList(item.children, item.id) : [],\n        }));\n    };\n\n    // 已勾选的节点\n    const checkedKeys = computed({\n      get: () => props.value,\n      set: (val: any) =>\n        emit(\"update:value\", Array.isArray(val) ? val : val.checked),\n    });\n\n    onMounted(async () => {\n      // 获取菜单列表\n      state.spinning = true;\n      const {data} = await getMenu().finally(\n        () => (state.spinning = false)\n      );\n      if (data.code === 200) {\n        state.treeData = treeList(data.data);\n        console.log(state.treeData)\n      }\n    });\n\n    // 获取所有父节点的key\n    const getParentsKey = (treeNode, arr: number[] = []) => {\n      if (treeNode.eventKey) {\n        arr.push(treeNode.eventKey);\n        return getParentsKey(treeNode.vcTreeNode, arr);\n      }\n      return arr;\n    };\n\n    // 获取所有子节点的key\n    const getChildrenKeys = (treeNode, arr: number[] = []) => {\n      if (treeNode?.children.length > 0) {\n        console.log(treeNode.children, \"children\");\n        return treeNode.children.reduce((prev, curr) => {\n          if (curr.children.length > 0) {\n            prev.push(...getChildrenKeys(curr, prev), []);\n          }\n          return prev.concat([curr.id]);\n        }, arr);\n      }\n      return arr;\n    };\n\n    // 勾选事件处理函数\n    const onCheck = (keys, { node, checked }) => {\n      let tempKeys: number[] = checkedKeys.value;\n      // 子节点选中，父节点必然要选中\n      if (checked) {\n        tempKeys = [\n          ...new Set([\n            ...checkedKeys.value,\n            ...keys.checked,\n            ...getParentsKey(node.vcTreeNode),\n            ...getChildrenKeys(node.dataRef),\n          ]),\n        ];\n      } else {\n        const childrenKeys = getChildrenKeys(node.dataRef);\n        console.log(childrenKeys, \"childrenKeys\");\n        if (childrenKeys.length > 0) {\n          tempKeys = keys.checked.filter(\n            (item) => !childrenKeys.includes(item)\n          );\n        } else {\n          tempKeys = keys.checked;\n        }\n        // 获取所有同级节点\n        const children =\n          node.vcTreeNode?.dataRef?.children?.map((item) => item.id) || [];\n        // 如果当前所有选中的节点中没有包含任何一个直属子节点\n        if (!children.some((item) => tempKeys.includes(item))) {\n          tempKeys = tempKeys.filter(\n            (item) => item != node.vcTreeNode?.eventKey\n          );\n        }\n      }\n      checkedKeys.value = tempKeys;\n    };\n\n    return {\n      ...toRefs(state),\n      checkedKeys,\n      onCheck,\n    };\n  },\n});\n","import { render } from \"./tree.vue?vue&type=template&id=1dc8395f\"\nimport script from \"./tree.vue?vue&type=script&lang=ts\"\nexport * from \"./tree.vue?vue&type=script&lang=ts\"\n\nimport \"./tree.vue?vue&type=style&index=0&id=1dc8395f&lang=less\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from 'vue';\n// import { getMenu } from '@/server/menu'\nimport { FormOutlined, DeleteOutlined } from '@ant-design/icons-vue';\nimport Tree from './components/tree.vue'\nexport default defineComponent({\n    name: 'menu',\n    components: {\n        Tree,\n        DeleteOutlined,\n        FormOutlined\n    },\n    setup() {\n        const edit = (v) => {\n            console.log('d')\n        }\n        const dele = (v) => {\n            console.log('dasd')\n        }\n        return {\n            edit,\n            dele\n        }\n    }\n})\n","import { render } from \"./index.vue?vue&type=template&id=1ccd1a4c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1ccd1a4c&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1ccd1a4c\"\n\nexport default script"],"sourceRoot":""}